<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>Benutzer Dashboard - SmartTimeTracker</title>
</head>
<body>
    <h1>Hallo {{ user.name }}</h1>
    <a href="{{ url_for('user_logout') }}">Logout</a>
    <h2>Zeiteintrag erfassen</h2>
    <form method="post">
        <input type="number" step="0.01" name="duration" placeholder="Dauer (Stunden)" required>
        <input type="date" name="date" value="{{ request.form.date or '' }}">
        <select name="project_id" required>
            <option value="">Projekt wählen</option>
            {% for project in projects %}
                <option value="{{ project.id }}">{{ project.name }}</option>
            {% endfor %}
        </select>
        <input type="text" name="comment" placeholder="Kommentar" required>
        <button type="submit">Speichern</button>
    </form>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
        {% for category, message in messages %}
          <li style="color:green;">{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
    <h2>Meine Zeiteinträge</h2>
    <table border="1">
        <tr>
            <th>Datum</th>
            <th>Dauer (h)</th>
            <th>Projekt</th>
            <th>Kommentar</th>
        </tr>
        {% for entry in entries %}
        <tr>
            <td>{{ entry.date }}</td>
            <td>{{ entry.duration }}</td>
            <td>{{ entry.project.name }}</td>
            <td>{{ entry.comment }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
